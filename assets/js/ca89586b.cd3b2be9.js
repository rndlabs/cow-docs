"use strict";(self.webpackChunkcow_docs=self.webpackChunkcow_docs||[]).push([[5716],{3905:(e,t,o)=>{o.d(t,{Zo:()=>d,kt:()=>m});var a=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,a,r=function(e,t){if(null==e)return{};var o,a,r={},n=Object.keys(e);for(a=0;a<n.length;a++)o=n[a],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)o=n[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},h="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var o=e.components,r=e.mdxType,n=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=c(o),u=r,m=h["".concat(l,".").concat(u)]||h[u]||p[u]||n;return o?a.createElement(m,i(i({ref:t},d),{},{components:o})):a.createElement(m,i({ref:t},d))}));function m(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var n=o.length,i=new Array(n);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<n;c++)i[c]=o[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,o)}u.displayName="MDXCreateElement"},4690:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>n,metadata:()=>s,toc:()=>c});var a=o(7462),r=(o(7294),o(3905));const n={},i="Road to Decentralisation",s={unversionedId:"overview/road-to-decentralisation",id:"overview/road-to-decentralisation",title:"Road to Decentralisation",description:"CoW Protocol aims to be a fully decentralised protocol, but the reality is that in order to fully be decentralised, there's still a long road to walk ahead. Currently, the protocol has certain parts that are more decentralised than others, and if we were to compartmentalise the protocol into pieces, we would have the following:",source:"@site/docs/1_overview/7_road-to-decentralisation.md",sourceDirName:"1_overview",slug:"/overview/road-to-decentralisation",permalink:"/cow-docs/docs/overview/road-to-decentralisation",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/1_overview/7_road-to-decentralisation.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Learnings & Improvements",permalink:"/cow-docs/docs/overview/learnings-and-improvements-of-gpv1"},next:{title:"Front-end",permalink:"/cow-docs/docs/category/front-end"}},l={},c=[{value:"\u2705 Phase 1",id:"-phase-1",level:3},{value:"Outcomes",id:"outcomes",level:4},{value:"\ud83d\udc49 Phase 2",id:"-phase-2",level:3},{value:"\ud83d\udd2d Phase 3",id:"-phase-3",level:3}],d={toc:c},h="wrapper";function p(e){let{components:t,...o}=e;return(0,r.kt)(h,(0,a.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"road-to-decentralisation"},"Road to Decentralisation"),(0,r.kt)("p",null,"CoW Protocol aims to be a fully decentralised protocol, but the reality is that in order to fully be decentralised, there's still a long road to walk ahead. Currently, the protocol has certain parts that are more decentralised than others, and if we were to compartmentalise the protocol into pieces, we would have the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"User Interface - CoW Swap (front-end)"),(0,r.kt)("li",{parentName:"ul"},"Smart Contracts - Allowance & Settlement Contract"),(0,r.kt)("li",{parentName:"ul"},"Batch consensus - Order database"),(0,r.kt)("li",{parentName:"ul"},"Solvers - Algorithms")),(0,r.kt)("p",null,"Both the user interface and the smart contracts are pieces that are already at 100% level of decentralisation. The UI can be used by anyone without any possible blocking as it resides in ",(0,r.kt)("a",{parentName:"p",href:"https://ipfs.io"},"IPFS"),". The smart contracts have no admin key, and do not hold users' balances in them, making them fully trustless and decentralised. On the other hand, the order database & the solvers are the parts of the protocol that need the most work to achieve decentralisation. This is why in order to do it correctly, we have decided to do it in ",(0,r.kt)("em",{parentName:"p"},"phases")," rather than all at once."),(0,r.kt)("h3",{id:"-phase-1"},"\u2705 Phase 1"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Initially, the smart contract curates a list of trusted solvers (e.g. an account running the solver implementation in gp-v2-services). This list would be given to the CowDAO and will essentially control who gets to submit settlement solutions. People that want to implement solver strategies in this phase are invited to submit PRs to our repository to include their logic."),(0,r.kt)("p",{parentName:"blockquote"},"It will allow competition between different independent solver accounts that communicate via some sort of central managed channel. Each solver would announce the \u201cobjective value\u201d (what that value should be optimised for, is a separate topic) they have computed for the current batch auction and all together they agree on who obtains the right to settle this auction. In order to compute the objective value there needs to be consensus on what the state of the auction is (all valid orders for which surplus should be achieved). This is done via a central off-chain orderbook API (more on how to decentralise this part in ",(0,r.kt)("a",{parentName:"p",href:"#phase-3"},"phase 3"),'). We should maybe mention here that for an order to be considered valid by the Orderbook API it needs to pay a "sufficient ',(0,r.kt)("a",{parentName:"p",href:"definitions"},"protocol fee"),'" (to be discussed in a separate topic) to the protocol.'),(0,r.kt)("p",{parentName:"blockquote"},"In this phase the DAO would still pay close attention to who becomes an authenticated solver as all of them should be held accountable for any possible damage done to traders caused by a malicious solver. Furthermore we expect the DAO to payout rewards (transaction costs + a % taken from accrued protocol fees) to solvers based on their contribution.")),(0,r.kt)("h4",{id:"outcomes"},"Outcomes"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The ",(0,r.kt)("a",{parentName:"li",href:"../smart-contracts/allow-list-authenticator/introduction"},"allow-list authenticator")," contract (which is an ",(0,r.kt)("inlineCode",{parentName:"li"},"EIP-1967")," proxy) has had it's ",(0,r.kt)("a",{parentName:"li",href:"https://etherscan.io/address/0x2c4c28DDBdAc9C5E7055b4C863b72eA0149D8aFE#readContract#F1"},(0,r.kt)("inlineCode",{parentName:"a"},"owner")," migrated to CoW DAO")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://snapshot.org/#/cow.eth/proposal/0x16d8c681d52b24f1ccd854084e07a99fce6a7af1e25fd21ddae6534b411df870"},"CIP-11: Update Rules of the Solver Competition")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://snapshot.org/#/cow.eth/proposal/0x2d3f9bd1ea72dca84b03e97dda3efc1f4a42a772c54bd2037e8b62e7d09a491f"},"CIP-20: Auction model for solver rewards"))),(0,r.kt)("h3",{id:"-phase-2"},"\ud83d\udc49 Phase 2"),(0,r.kt)("p",null,"While the core ",(0,r.kt)("a",{parentName:"p",href:"../smart-contracts/settlement-contract/introduction"},"settlement contract")," is ",(0,r.kt)("em",{parentName:"p"},"not")," upgradable, the logic of how solvers are ",(0,r.kt)("em",{parentName:"p"},"authenticated")," is upgradeable. In phase 2, we envision CoW DAO to put in place a permissionless model, where anyone can become an authenticated solver as long as they stake the asset and amount defined by the Cow DAO. For this phase, the DAO would agree on a set of rules (e.g. under what circumstances batches are allowed to be split into multiple ones, which set of on-chain liquidity has to be at least considered for a solution, etc)."),(0,r.kt)("p",null,'Upon violation of these rules, the DAO can vote to slash a solver\u2019s stake. The set of rules could be coded into a "verifier client" that members of the DAO run in order to indicate when a slashing vote should be cast.'),(0,r.kt)("p",null,"The second, and arguably less crucial, piece of infrastructure that is centralised is the off-chain orderbook API (part of ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/cowprotocol/services"},"services"),"). In order to adjudicate over suspected malicious behaviour by a solver, participants need to agree on the state of the auction at the time of solution finding (e.g. the set of valid orders at this point in time)."),(0,r.kt)("h3",{id:"-phase-3"},"\ud83d\udd2d Phase 3"),(0,r.kt)("p",null,"In phase 3 we hope that the centralised orderbook changes to a distributed P2P client network. Consensus could be reached:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"by a native client implementation,"),(0,r.kt)("li",{parentName:"ul"},"by making Cow Protocol a first party citizen in Ethereum nodes (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"geth"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"erigon"),"), or"),(0,r.kt)("li",{parentName:"ul"},"by piggy-backing on a cheap side chain or test network (e.g. ",(0,r.kt)("a",{parentName:"li",href:"https://gnosischain.com"},"Gnosis Chain"),") for data availability.")))}p.isMDXComponent=!0}}]);