"use strict";(self.webpackChunkcow_docs=self.webpackChunkcow_docs||[]).push([[1858],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>h});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=n.createContext({}),u=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},c=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(o),f=r,h=p["".concat(l,".").concat(f)]||p[f]||d[f]||a;return o?n.createElement(h,i(i({ref:t},c),{},{components:o})):n.createElement(h,i({ref:t},c))}));function h(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,i[1]=s;for(var u=2;u<a;u++)i[u]=o[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}f.displayName="MDXCreateElement"},5135:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var n=o(7462),r=(o(7294),o(3905));const a={},i="2. Get a Quote",s={unversionedId:"tutorials/how-to-submit-orders-via-the-api/query-the-fee-endpoint",id:"tutorials/how-to-submit-orders-via-the-api/query-the-fee-endpoint",title:"2. Get a Quote",description:'Placing an order is free in CoW Protocol and only requires signing an off-chain message. Order execution is then done by so-called "solvers" and doesn\u2019t require you to pay any gas fee.',source:"@site/docs/5_tutorials/how-to-submit-orders-via-the-api/3_query-the-fee-endpoint.md",sourceDirName:"5_tutorials/how-to-submit-orders-via-the-api",slug:"/tutorials/how-to-submit-orders-via-the-api/query-the-fee-endpoint",permalink:"/cow-docs/docs/tutorials/how-to-submit-orders-via-the-api/query-the-fee-endpoint",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/5_tutorials/how-to-submit-orders-via-the-api/3_query-the-fee-endpoint.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"1. Set Allowance for the sell token",permalink:"/cow-docs/docs/tutorials/how-to-submit-orders-via-the-api/set-allowance-for-the-sell-token"},next:{title:"3. Signing the order",permalink:"/cow-docs/docs/tutorials/how-to-submit-orders-via-the-api/signing-the-order"}},l={},u=[],c={toc:u},p="wrapper";function d(e){let{components:t,...o}=e;return(0,r.kt)(p,(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"2-get-a-quote"},"2. Get a Quote"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Placing an order"),' is free in CoW Protocol and only requires signing an off-chain message. Order execution is then done by so-called "solvers" and doesn\u2019t require you to pay any ',(0,r.kt)("a",{parentName:"p",href:"../../overview/definitions"},"gas fee"),"."),(0,r.kt)("p",null,"If your order is matched and executed the ",(0,r.kt)("a",{parentName:"p",href:"../../overview/definitions"},"gas fee")," of settling it is the responsibility of the solver. As a consequence, solvers have to be reimbursed that cost in the form of a ",(0,r.kt)("a",{parentName:"p",href:"../../overview/definitions"},"protocol fee"),". This protocol fee is charged in the token you are selling and the exact amount depends on the route and amount you are trading."),(0,r.kt)("p",null,"The API provides a single endpoint to get a quote (protocol fee + amount estimate) for your order. Orders that don\u2019t specify a high enough protocol fee will be rejected by the API. The protocol fee estimate is valid for a short period of time (long enough for you to sign and send the final order)."),(0,r.kt)("p",null,"In order to quote the current protocol fee to trade 10,000 USDC for WETH you can query:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST -H  "accept: application/json" -H  "Content-Type: application/json"  -d \'{                                                                                                               \n  "sellToken": "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",\n  "buyToken": "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",\n  "receiver": "0x0000000000000000000000000000000000000000",\n  "validTo": 2281625458,\n  "appData": "0x0000000000000000000000000000000000000000000000000000000000000000",\n  "partiallyFillable": false,\n  "sellTokenBalance": "erc20",\n  "buyTokenBalance": "erc20",\n  "from": "0x55fe002aeff02f77364de339a1292923a15844b8",\n  "kind": "sell",\n  "sellAmountBeforeFee": "10000000000"\n}\' https://api.cow.fi/mainnet/api/v1/quote\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note, that the amount is given in \u201catoms\u201d")," (smallest unit of the token, e.g. wei for ETH). With USDC having 6 decimals, 10k USDC equals 10e10 atoms.","\\"),(0,r.kt)("hr",null),(0,r.kt)("p",null,"The response contains a quote object containing a ready to be signed order with all relevant fields as well as some metadata regarding the validity of the quote and the account that should be used for signing."),(0,r.kt)("p",null,"`","`"),(0,r.kt)("p",null,"In the example above the minimum protocol fee for the order would be about 66 USDC and you would receive about 2.29 WETH."),(0,r.kt)("p",null,"The protocol fee is always paid on top of the specified sell amount. In the query we asked to sell 10k USDC ",(0,r.kt)("strong",{parentName:"p"},"before protocol fees")," meaning that the sell amount was reduced by the protocol fee amount (feeAmount + sellAmount = 10k USDC in the response). You can also provide ",(0,r.kt)("strong",{parentName:"p"},"sellAmountAfterFees")," in which case the sell Amount will be exactly the specified amount (make sure to have sufficient additional balance to pay for the protocol fee). For buy orders specify set ",(0,r.kt)("inlineCode",{parentName:"p"},"kind")," to ",(0,r.kt)("em",{parentName:"p"},"buy")," and pass ",(0,r.kt)("strong",{parentName:"p"},"buyAmountAfterFee")," (since the protocol fee is always taken in the sell token there is no differentiation in this case)"),(0,r.kt)("p",null,"Depending on your use case you may discard the estimated buy/sell amount. In case you don't please note that ",(0,r.kt)("strong",{parentName:"p"},"the provided quote")," ",(0,r.kt)("strong",{parentName:"p"},"doesn't include any slippage."),' This means that the tiniest price move may make your order un-fillable. In order to increase your settlement chances especially in volatile conditions we advise you add a slippage tolerance of at least 0.3%. Our solvers ensure that setting a slippage on your order doesn\u2019t make you prone to MEV attacks is given in "atoms" - e.g. wei for ETH) ',(0,r.kt)("strong",{parentName:"p"},"before protocol fee")))}d.isMDXComponent=!0}}]);