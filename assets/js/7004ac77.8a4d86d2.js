"use strict";(self.webpackChunkcow_docs=self.webpackChunkcow_docs||[]).push([[4238],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),u=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return o.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},f=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(n),f=r,h=d["".concat(l,".").concat(f)]||d[f]||p[f]||a;return n?o.createElement(h,i(i({ref:t},c),{},{components:n})):o.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,i[1]=s;for(var u=2;u<a;u++)i[u]=n[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}f.displayName="MDXCreateElement"},3733:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var o=n(7462),r=(n(7294),n(3905));const a={},i="2. Get a Quote",s={unversionedId:"tutorials/how-to-submit-orders-via-the-api/query-the-fee-endpoint",id:"tutorials/how-to-submit-orders-via-the-api/query-the-fee-endpoint",title:"2. Get a Quote",description:"Placing an order is free in CoW Protocol and only requires signing an off chain message. Order execution is then done by so-called solvers and doesn\u2019t require you to pay any gas.",source:"@site/docs/5_tutorials/how-to-submit-orders-via-the-api/2.-query-the-fee-endpoint.md",sourceDirName:"5_tutorials/how-to-submit-orders-via-the-api",slug:"/tutorials/how-to-submit-orders-via-the-api/query-the-fee-endpoint",permalink:"/cow-docs/docs/tutorials/how-to-submit-orders-via-the-api/query-the-fee-endpoint",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/5_tutorials/how-to-submit-orders-via-the-api/2.-query-the-fee-endpoint.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"1. Set Allowance for the sell token",permalink:"/cow-docs/docs/tutorials/how-to-submit-orders-via-the-api/set-allowance-for-the-sell-token"},next:{title:"3. Signing the order",permalink:"/cow-docs/docs/tutorials/how-to-submit-orders-via-the-api/signing-the-order"}},l={},u=[],c={toc:u},d="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"2-get-a-quote"},"2. Get a Quote"),(0,r.kt)("p",null,"Placing an order is free in CoW Protocol and only requires signing an off chain message. Order execution is then done by so-called solvers and doesn\u2019t require you to pay any gas."),(0,r.kt)("p",null,"If your order is matched and executed the gas cost of settling it is taken over by the solver. As a consequence, solvers have to be reimbursed that cost in the form of a trading fee. This fee is charged in the token you are selling and the exact amount depends on the route and amount you are trading."),(0,r.kt)("p",null,'Placing an order is free and only requires signing an off chain message. Order execution is then done by so-called "solvers". If your order is matched and executed the gas cost of settling it is taken over by the solver. As a consequence solvers have to be reimbursed that cost in the form of a trading fee. This fee is charged in the token you are selling and the exact amount mainly depends on the route and amount you are trading.'),(0,r.kt)("p",null,"The API provides a single endpoint to get a quote (fee + amount estimate) for your order. Orders that don\u2019t specify a high enough fee will be rejected by the API. The fee estimate is valid for a short period of time (long enough for you to sign and send the final order)."),(0,r.kt)("p",null,"In order to quote the current fee to trade 10,000 USDC for WETH you can query:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST -H  "accept: application/json" -H  "Content-Type: application/json"  -d \'{                                                                                                               \n  "sellToken": "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",\n  "buyToken": "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",\n  "receiver": "0x0000000000000000000000000000000000000000",\n  "validTo": 2281625458,\n  "appData": "0x0000000000000000000000000000000000000000000000000000000000000000",\n  "partiallyFillable": false,\n  "sellTokenBalance": "erc20",\n  "buyTokenBalance": "erc20",\n  "from": "0x55fe002aeff02f77364de339a1292923a15844b8",\n  "kind": "sell",\n  "sellAmountBeforeFee": "10000000000"\n}\' https://api.cow.fi/mainnet/api/v1/quote\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note, that the amount is given in \u201catoms\u201d")," (smallest unit of the token, e.g. wei for ETH). With USDC having 6 decimals, 10k USDC equals 10e10 atoms.","\\"),(0,r.kt)("hr",null),(0,r.kt)("p",null,"The response contains a quote object containing a ready to be signed order with all relevant fields as well as some metadata regarding the validity of the quote and the account that should be used for signing."),(0,r.kt)("p",null,"`","`"),(0,r.kt)("p",null,"In the example above the minimum fee for the order would be about 66 USDC and you would receive about 2.29 WETH."),(0,r.kt)("p",null,"The fee is always paid on top of the specified sell amount. In the query we asked to sell 10k USDC ",(0,r.kt)("strong",{parentName:"p"},"before fees")," meaning that the sell amount was reduced by the fee amount (feeAmount + sellAmount = 10k USDC in the response). You can also provide ",(0,r.kt)("strong",{parentName:"p"},"sellAmountAfterFees")," in which case the sell Amount will be exactly the specified amount (make sure to have sufficient additional balance to pay for the fee). For buy orders specify set ",(0,r.kt)("inlineCode",{parentName:"p"},"kind")," to ",(0,r.kt)("em",{parentName:"p"},"buy")," and pass ",(0,r.kt)("strong",{parentName:"p"},"buyAmountAfterFee")," (since fee is always taken in the sell token there is no differentiation in this case)"),(0,r.kt)("p",null,"Depending on your use case you may discard the estimated buy/sell amount. In case you don't please note that ",(0,r.kt)("strong",{parentName:"p"},"the provided quote")," ",(0,r.kt)("strong",{parentName:"p"},"doesn't include any slippage."),' This means that the tiniest price move may make your order un-fillable. In order to increase your settlement chances especially in volatile conditions we advise you add a slippage tolerance of at least 0.3%. Our solvers ensure that setting a slippage on your order doesn\u2019t make you prone to MEV attacks is given in "atoms" - e.g. wei for ETH) ',(0,r.kt)("strong",{parentName:"p"},"before fee")))}p.isMDXComponent=!0}}]);