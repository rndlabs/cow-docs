"use strict";(self.webpackChunkcow_docs=self.webpackChunkcow_docs||[]).push([[9066],{3905:(e,t,r)=>{r.d(t,{Zo:()=>l,kt:()=>b});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=n.createContext({}),d=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},l=function(e){var t=d(e.components);return n.createElement(c.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=d(r),f=a,b=u["".concat(c,".").concat(f)]||u[f]||p[f]||o;return r?n.createElement(b,i(i({ref:t},l),{},{components:r})):n.createElement(b,i({ref:t},l))}));function b(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=f;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:a,i[1]=s;for(var d=2;d<o;d++)i[d]=r[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}f.displayName="MDXCreateElement"},9162:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var n=r(7462),a=(r(7294),r(3905));const o={},i="5. Checking order status",s={unversionedId:"tutorials/how-to-submit-orders-via-the-api/checking-order-status",id:"tutorials/how-to-submit-orders-via-the-api/checking-order-status",title:"5. Checking order status",description:"In order to follow if/when your order has been matched you can either subscribe to \u201cTrade\u201d events by the Settlement Contract:",source:"@site/docs/5_tutorials/how-to-submit-orders-via-the-api/6.-checking-order-status.md",sourceDirName:"5_tutorials/how-to-submit-orders-via-the-api",slug:"/tutorials/how-to-submit-orders-via-the-api/checking-order-status",permalink:"/cow-docs/docs/tutorials/how-to-submit-orders-via-the-api/checking-order-status",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/5_tutorials/how-to-submit-orders-via-the-api/6.-checking-order-status.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"4. Placing the order",permalink:"/cow-docs/docs/tutorials/how-to-submit-orders-via-the-api/placing-the-order"},next:{title:"Submitting Limit orders to the API",permalink:"/cow-docs/docs/category/submitting-limit-orders-to-the-api"}},c={},d=[],l={toc:d},u="wrapper";function p(e){let{components:t,...r}=e;return(0,a.kt)(u,(0,n.Z)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"5-checking-order-status"},"5. Checking order status"),(0,a.kt)("p",null,"In order to follow if/when your order has been matched you can either subscribe to \u201cTrade\u201d events by the ",(0,a.kt)("a",{parentName:"p",href:"https://etherscan.io/address/0x3328f5f2cEcAF00a2443082B657CedEAf70bfAEf"},"Settlement Contract"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'import GPv2SettlementArtefact from "@gnosis.pm/gp-v2-contracts/deployments/mainnet/GPv2Settlement.json";\nimport { Contract, ethers } from "ethers";\n\nconst uid = <uid to follow>;\nconst TRADE_TIMEOUT_SECONDS = 30*60\n\nconst settlement = new Contract(\u201c0x9008D19f58AAbD9eD0D60971565AA8510560ab41\u201d, GPv2SettlementArtefact.abi, ethers.provider)\nconst traded = new Promise((resolve: (value: boolean) => void) => {\n    ethers.provider.on(settlement.filters.Trade(trader), (log) => {\n      // Hacky way to verify that the UID is part of the event data\n      if (log.data.includes(uid.substring(2))) {\n        resolve(true);\n      }\n    });\n  });\n\nconst timeout = new Promise((resolve: (value: boolean) => void) => {\n    setTimeout(resolve, TRADE_TIMEOUT_SECONDS*1000, false);\n  });\n\nconst hasTraded = await Promise.race([traded, timeout]);\n')),(0,a.kt)("p",null,"This script waits up to 30 minutes to find a trade event before eventually timing out."),(0,a.kt)("p",null,"Or you can query our API using the order ID that you generated earlier"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("a",{parentName:"strong",href:"https://api.cow.fi/mainnet/api/v1/trades?orderUid=0xc21b7756caf1f6df13e9947767204620371ca791a4b91db8620f04905d25b608e0b3700e0aadcb18ed8d4bff648bc99896a18ad160ef0bca"},"https://api.cow.fi/mainnet/api/v1/trades?orderUid=0xc21b7756caf1f6df13e9947767204620371ca791a4b91db8620f04905d25b608e0b3700e0aadcb18ed8d4bff648bc99896a18ad160ef0bca"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'[\n  {\n    "blockNumber": 12826021,\n    "logIndex": 31,\n    "orderUid": "0xc21b7756caf1f6df13e9947767204620371ca791a4b91db8620f04905d25b608e0b3700e0aadcb18ed8d4bff648bc99896a18ad160ef0bca",\n    "buyAmount": "80623566",\n    "sellAmount": "100000000000000000000",\n    "sellAmountBeforeFees": "89287648398497935360",\n    "owner": "0xe0b3700e0aadcb18ed8d4bff648bc99896a18ad1",\n    "buyToken": "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",\n    "sellToken": "0x1a5f9352af8af974bfc03399e3767df6370d82e4",\n    "txHash": "0xbcdd49946b56564b7ba7403ab63a2316ece5c6e12657782ffda620d192e591a0"\n  }\n]\n')),(0,a.kt)("p",null,"If your order was partially fillable and traded in multiple chunks you may find one entry per trade."),(0,a.kt)("p",null,"This is it. We hope you have been able to follow this tutorial end to end and made a successful trade. If you have any questions or are planning to write some utility software (e.g. signing logic in another language) please reach out to us on ",(0,a.kt)("a",{parentName:"p",href:"https://discord.gg/cowswap"},"Discord"),", we are always happy to help.\\"),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Happy Trading!"),"\\"))}p.isMDXComponent=!0}}]);