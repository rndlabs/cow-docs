"use strict";(self.webpackChunkcow_docs=self.webpackChunkcow_docs||[]).push([[4477],{3905:(e,t,r)=>{r.d(t,{Zo:()=>l,kt:()=>m});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),u=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},l=function(e){var t=u(e.components);return n.createElement(c.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),p=u(r),h=o,m=p["".concat(c,".").concat(h)]||p[h]||d[h]||a;return r?n.createElement(m,s(s({ref:t},l),{},{components:r})):n.createElement(m,s({ref:t},l))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,s=new Array(a);s[0]=h;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[p]="string"==typeof e?e:o,s[1]=i;for(var u=2;u<a;u++)s[u]=r[u];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},5730:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var n=r(7462),o=(r(7294),r(3905));const a={},s="Querying the Cow Subgraph",i={unversionedId:"cow-sdk/querying-the-cow-subgraph",id:"cow-sdk/querying-the-cow-subgraph",title:"Querying the Cow Subgraph",description:"The Subgraph is constantly indexing the protocol, making all the information more accessible. It provides information about trades, users, tokens and settlements. Additionally, it has some data aggregations which provides insights on the hourly/daily/totals USD volumes, trades, users, etc.",source:"@site/docs/6_cow-sdk/6_querying-the-cow-subgraph.md",sourceDirName:"6_cow-sdk",slug:"/cow-sdk/querying-the-cow-subgraph",permalink:"/cow-docs/docs/cow-sdk/querying-the-cow-subgraph",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/6_cow-sdk/6_querying-the-cow-subgraph.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"BONUS: CIDv0 and AppData",permalink:"/cow-docs/docs/cow-sdk/order-meta-data-appdata/bonus-cidv0-and-appdata"}},c={},u=[],l={toc:u},p="wrapper";function d(e){let{components:t,...r}=e;return(0,o.kt)(p,(0,n.Z)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"querying-the-cow-subgraph"},"Querying the Cow Subgraph"),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/cowprotocol/subgraph"},"Subgraph")," is constantly indexing the protocol, making all the information more accessible. It provides information about trades, users, tokens and settlements. Additionally, it has some data aggregations which provides insights on the hourly/daily/totals USD volumes, trades, users, etc."),(0,o.kt)("p",null,"The SDK provides just an easy way to access all this information."),(0,o.kt)("p",null,"You can query the Cow Subgraph either by running some common queries exposed by the ",(0,o.kt)("inlineCode",{parentName:"p"},"CowSubgraphApi")," or by building your own ones:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import { SubgraphApi, SupportedChainId } from '@cowprotocol/cow-sdk'\n\nconst subgraphApi = new SubgraphApi({ chainId: SupportedChainId.MAINNET })\n\n// Get CoW Protocol totals\nconst { tokens, orders, traders, settlements, volumeUsd, volumeEth, feesUsd, feesEth } =\n  await csubgraphApi.getTotals()\nconsole.log({ tokens, orders, traders, settlements, volumeUsd, volumeEth, feesUsd, feesEth })\n\n// Get last 24 hours volume in usd\nconst { hourlyTotals } = await cowSubgraphApi.getLastHoursVolume(24)\nconsole.log(hourlyTotals)\n\n// Get last week volume in usd\nconst { dailyTotals } = await cowSubgraphApi.getLastDaysVolume(7)\nconsole.log(dailyTotals)\n\n// Get the last 5 batches\nconst query = `\n  query LastBatches($n: Int!) {\n    settlements(orderBy: firstTradeTimestamp, orderDirection: desc, first: $n) {\n      txHash\n      firstTradeTimestamp\n    }\n  }\n`\nconst variables = { n: 5 }\nconst response = await cowSubgraphApi.runQuery(query, variables)\nconsole.log(response)\n")))}d.isMDXComponent=!0}}]);